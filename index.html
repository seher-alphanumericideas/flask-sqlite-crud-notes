<!DOCTYPE html>
<html>
<head>
    <title>Notes App</title>
    <style>
        body { font-family: Arial; margin: 40px; }
        form { margin-bottom: 20px; }
        input, textarea { display: block; margin-bottom: 10px; width: 300px; padding: 5px; }
        button { margin-right: 10px; }
        .note { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
    </style>
</head>
<body>
    <h1>Notes</h1>

    <form id="noteForm">
        <input type="hidden" id="noteId">
        <input type="text" id="title" placeholder="Title" required>
        <textarea id="content" placeholder="Content" required></textarea>
        <button type="submit">Save Note</button>
    </form>

    <div id="notes"></div>

    <script>
        const form = document.getElementById('noteForm');
        const noteIdField = document.getElementById('noteId');
        const titleField = document.getElementById('title');
        const contentField = document.getElementById('content');
        const notesDiv = document.getElementById('notes');

        function fetchNotes() {
            fetch('/notes')
                .then(response => response.json())
                .then(data => {
                    notesDiv.innerHTML = '';
                    data.forEach(note => {
                        const div = document.createElement('div');
                        div.className = 'note';
                        div.innerHTML = `
                            <h3>${note.title}</h3>
                            <p>${note.content}</p>
                            <button onclick="editNote(${note.id}, '${note.title}', \`${note.content}\`)">Edit</button>
                            <button onclick="deleteNote(${note.id})">Delete</button>
                        `;
                        notesDiv.appendChild(div);
                    });
                });
        }

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const id = noteIdField.value;
            const method = id ? 'PUT' : 'POST';
            const url = id ? '/notes/' + id : '/notes';
            fetch(url, {
                method: method,
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    title: titleField.value,
                    content: contentField.value
                })
            })
            .then(() => {
                form.reset();
                fetchNotes();
            });
        });

        function editNote(id, title, content) {
            noteIdField.value = id;
            titleField.value = title;
            contentField.value = content;
        }

        function deleteNote(id) {
            fetch('/notes/' + id, { method: 'DELETE' })
                .then(() => fetchNotes());
        }

        fetchNotes();
    </script>
</body>
</html>
